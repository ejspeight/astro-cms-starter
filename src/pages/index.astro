---
/**
 * Home Page â€” Hero, about snippet, and CTA from CMS content.
 */

import BaseLayout from "../layouts/BaseLayout.astro";
import { getEntry, render } from "astro:content";

const page = await getEntry("pages", "home");
if (!page) throw new Error("Missing content: src/content/pages/home.md");

const { Content } = await render(page);
const {
  hero_heading,
  hero_subheading,
  hero_cta_text,
  hero_cta_link,
  hero_image,
  about_snippet,
  seo_description,
  og_image,
} = page.data;
---

<BaseLayout
  title="Home"
  description={seo_description || undefined}
  ogImage={og_image || undefined}
>
  <main class="flex-1">
    <!-- Hero -->
    <section class="relative bg-secondary text-text-light py-24 md:py-32 px-6">
      {hero_image && (
        <img
          src={hero_image}
          alt=""
          class="absolute inset-0 w-full h-full object-cover opacity-20"
          loading="eager"
          fetchpriority="high"
          decoding="async"
          width="1600"
          height="900"
        />
      )}
      <div class="relative max-w-4xl mx-auto text-center">
        <h1 class="text-4xl md:text-6xl font-bold mb-4 font-heading text-text-light">
          {hero_heading}
        </h1>
        {hero_subheading && (
          <p class="text-xl md:text-2xl text-text-muted mb-8 max-w-2xl mx-auto">
            {hero_subheading}
          </p>
        )}
        {hero_cta_text && hero_cta_link && (
          <a
            href={hero_cta_link}
            class="inline-block bg-primary hover:bg-primary-hover text-white font-semibold px-8 py-3 rounded-md transition-colors duration-200"
          >
            {hero_cta_text}
          </a>
        )}
      </div>
    </section>

    <!-- About snippet -->
    {about_snippet && (
      <section class="py-16 md:py-20 px-6">
        <div class="max-w-3xl mx-auto text-center">
          <h2 class="text-3xl font-bold mb-6 font-heading">Who We Are</h2>
          <p class="text-lg text-text-body leading-relaxed mb-8">
            {about_snippet}
          </p>
          <a
            href="/about"
            class="text-primary hover:text-primary-hover font-semibold transition-colors"
          >
            Learn more about us &rarr;
          </a>
        </div>
      </section>
    )}

    <!-- Body content from markdown (if any) -->
    <section class="py-12 px-6 bg-accent-muted">
      <div class="max-w-3xl mx-auto prose prose-slate">
        <Content />
      </div>
    </section>
  </main>
</BaseLayout>
